(function outer(modules,cache,entries){var global=function(){return this}();function require(name){if(cache[name])return cache[name].exports;if(modules[name])return call(name,require);throw new Error('cannot find module "'+name+'"')}function call(id,require){var m=cache[id]={exports:{}};var mod=modules[id];var name=mod[2];var fn=mod[0];var threw=true;try{fn.call(m.exports,function(req){var dep=modules[id][1][req];return require(dep||req)},m,m.exports,outer,modules,cache,entries);threw=false}finally{if(threw){delete cache[id]}else if(name){cache[name]=cache[id]}}return cache[id].exports}for(var id in entries){if(entries[id]){global[entries[id]]=require(id)}else{require(id)}}require.duo=true;require.cache=cache;require.modules=modules;return require})({1:[function(require,module,exports){(function(){var Plugin,_tk,aPlugin,attrs,buildqs,config,debug,doc,dom,fn,formatDate,gmodal2,gsnContext,i,j,k,lastRefreshTime,len,len1,loadScript,log,myBrick,myPlugin,oldGsnAdvertising,prefix,ref,ref1,script,trakless2,win;debug=require("debug");log=debug("bricktag");trakless2=require("trakless");loadScript=require("load-script-once");gmodal2=require("gmodal");dom=require("dom");if(typeof console!=="undefined"&&console!==null){if(console.log.bind!=null){log.log=console.log.bind(console)}}win=window;doc=win.document;gsnContext=win.GSNContext;_tk=win._tk;myBrick=win.Gsn||{};oldGsnAdvertising=myBrick.Advertising;lastRefreshTime=0;if(oldGsnAdvertising!=null){if(oldGsnAdvertising.pluginLoaded){return}}formatDate=function(date){var d,day,month,year;d=new Date;if(date){d=new Date(date)}month=""+d.getMonth()+1;day=""+d.getDate();year=d.getFullYear();if(month.length<2){month="0"+month}if(day.length<2){day="0"+day}return[year,month,day].join("")};config={pixelUrl:"//pi.gsngrocers.com/pi.gif",xstoreUrl:"//cdn.gsngrocers.com/script/xstore.html"};Plugin=function(){function Plugin(){}Plugin.prototype.pluginLoaded=true;Plugin.prototype.iframeContent='<!DOCTYPE html><html> <head> <title></title> <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-migrate/1.2.1/jquery-migrate.min.js"></script> </head> <body> <script>var pwin=window.parent; try{var testwin=window.top.bricktag; pwin=window.top;}catch (e){}; try{var bt=window.bricktag=document.bricktag=pwin.bricktag; var url=bt.getAnxUrl($(document).width(), $(document).height()); document.write(url);}catch (e){}; </script> <!--REPLACEME--></body></html>';Plugin.prototype.defP={page:void 0,evtname:void 0,dept:void 0,deviceid:void 0,storeid:void 0,consumerid:void 0,isanon:true,loyaltyid:void 0,aisle:void 0,category:void 0,shelf:void 0,brand:void 0,pcode:void 0,pdesc:void 0,latlng:void 0,evtcategory:void 0,evtproperty:void 0,evtaction:void 0,evtvalue:void 0};Plugin.prototype.translator={page:"dt",evtname:"en",dept:"dpt",deviceid:"dvceid",storeid:"stid",consumerid:"uid",isanon:"anon",loyaltyid:"loyid",aisle:"aisle",category:"cat",shelf:"shf",brand:"bn",pcode:"ic",pdesc:"in",latlng:"lln",evtcategory:"ec",evtproperty:"ep",evtlabel:"el",evtaction:"ea",evtvalue:"ev"};Plugin.prototype.isDebug=false;Plugin.prototype.hasLoad=false;Plugin.prototype.brickid=0;Plugin.prototype.anxTagId=void 0;Plugin.prototype.onAllEvents=void 0;Plugin.prototype.oldGsnAdvertising=oldGsnAdvertising;Plugin.prototype.minSecondBetweenRefresh=2;Plugin.prototype.timer=void 0;Plugin.prototype.depts="";Plugin.prototype.configLoaded=false;Plugin.prototype.scriptLoaded=false;Plugin.prototype.getNetworkId=function(){var networkId,self;self=this;networkId=trakless2.util.session("anxTagId");return networkId};Plugin.prototype.emit=function(en,ed){if(en.indexOf("brickevent")<0){en="brickevent:"+en}win.setTimeout(function(){_tk.emitTop(en,{type:en,en:en.replace("brickevent:",""),detail:ed});if(typeof this.onAllEvents==="function"){this.onAllEvents({type:en,en:en.replace("brickevent:",""),detail:ed})}},100);return this};Plugin.prototype.on=function(en,cb){if(en.indexOf("brickevent")<0){en="brickevent:"+en}trakless.on(en,cb);return this};Plugin.prototype.off=function(en,cb){if(en.indexOf("brickevent")<0){en="brickevent:"+en}trakless.off(en,cb);return this};Plugin.prototype.log=function(message){var error,self;self=myBrick.Advertising;if(self.isDebug||debug.enabled("bricktag")){self.isDebug=true;if(typeof message==="object"){try{message=JSON.stringify(message)}catch(error){}}log(message)}return this};Plugin.prototype.trackAction=function(actionParam){var k,k2,self,tsP,v;self=myBrick.Advertising;tsP={};if(typeof actionParam==="object"){for(k in actionParam){v=actionParam[k];if(!(v!=null)){continue}k2=self.translator[k];if(k2){tsP[k2]=v}}}_tk.track("brick",tsP);self.log(actionParam);return this};Plugin.prototype.cleanKeyword=function(keyword){var result;result=keyword.replace(/\W+/gi,"_");if(result.toLowerCase!=null){result=result.toLowerCase()}return result};Plugin.prototype.addDept=function(dept){var goodDept,self;self=myBrick.Advertising;if(dept!=null){goodDept=self.cleanKeyword(dept);goodDept=","+goodDept;if(self.depts.indexOf(goodDept)<0){self.depts=""+goodDept+self.depts}}return this};Plugin.prototype.ajaxFireUrl=function(url){var img;if(typeof url==="string"){if(url.length<10){return}url=url.replace("%%CACHEBUSTER%%",(new Date).getTime());img=new Image(1,1);img.src=url}return this};Plugin.prototype.clickProduct=function(click,categoryId,brandName,productDescription,productCode,quantity,displaySize,regularPrice,currentPrice,savingsAmount,savingsStatement,adCode,creativeId){this.ajaxFireUrl(click);this.emit("clickProduct",{myPlugin:this,CategoryId:categoryId,BrandName:brandName,Description:productDescription,ProductCode:productCode,DisplaySize:displaySize,RegularPrice:regularPrice,CurrentPrice:currentPrice,SavingsAmount:savingsAmount,SavingsStatement:savingsStatement,AdCode:adCode,CreativeId:creativeId,Quantity:quantity||1})};Plugin.prototype.clickBrickOffer=function(click,offerCode,checkCode){this.ajaxFireUrl(click);this.emit("clickBrickOffer",{myPlugin:this,OfferCode:offerCode||0})};Plugin.prototype.clickBrand=function(click,brandName){this.ajaxFireUrl(click);this.setBrand(brandName);this.emit("clickBrand",{myPlugin:this,BrandName:brandName})};Plugin.prototype.clickPromotion=function(click,adCode){this.ajaxFireUrl(click);this.emit("clickPromotion",{myPlugin:this,AdCode:adCode})};Plugin.prototype.clickRecipe=function(click,recipeId){this.ajaxFireUrl(click);this.emit("clickRecipe",{RecipeId:recipeId})};Plugin.prototype.clickLink=function(click,url,target){if(target===void 0||target===""){target="_top"}this.ajaxFireUrl(click);this.emit("clickLink",{myPlugin:this,Url:url,Target:target})};Plugin.prototype.clickCustom=function(click,name,value){this.ajaxFireUrl(click);this.emit("clickCustom",{myPlugin:this,Name:name,Value:value})};Plugin.prototype.actionHandler=function(evt,target){var allData,elem,i,k,len,payLoad,realk,self,v;self=myBrick.Advertising;elem=target;payLoad={};if(elem!=null){allData=trakless.util.allData(elem);for(v=i=0,len=allData.length;i<len;v=++i){k=allData[v];if(!/^brick/gi.test(k)){continue}realk=/^brick/i.replace(k,"").toLowerCase();payLoad[realk]=v}}self.refresh(payLoad);return self};Plugin.prototype.getDimensions=function(allData){var dimensionGroups,dimensionSet,dimensions,dimensionsData,i,k,len,self,v;self=this;dimensions=[];dimensionsData=allData["dimensions"];if(dimensionsData){dimensionGroups=dimensionsData.split(",");for(k=i=0,len=dimensionGroups.length;i<len;k=++i){v=dimensionGroups[k];dimensionSet=v.split("x");dimensions.push([parseInt(dimensionSet[0],10),parseInt(dimensionSet[1],10)])}}else{dimensions=[[0,0]]}return dimensions};Plugin.prototype.refreshAdPodsInternal=function(actionParam,forceRefresh){var adUnit,adpods,canRefresh,i,k,len,payLoad,ref,self,v;self=myBrick.Advertising;payLoad=actionParam||self.actionParam||{};ref=self.defP;for(k in ref){v=ref[k];if(v!=null){if(!payLoad[k]){payLoad[k]=v}}}payLoad.siteid=self.brickid;self.trackAction(payLoad);canRefresh=(new Date).getTime()/1e3-lastRefreshTime>=self.minSecondBetweenRefresh;if(forceRefresh||canRefresh){lastRefreshTime=(new Date).getTime()/1e3;adpods=dom(".brickunit");for(k=i=0,len=adpods.length;i<len;k=++i){adUnit=adpods[k];self.createIframe(adUnit)}}return this};Plugin.prototype.configSuccess=function(svrRsp){var data,ref,ref1,ref2,rsp,self;win.brickConfigCallback=null;rsp=svrRsp;if(typeof svrRsp==="string"){rsp=JSON.parse(svrRsp)}self=myBrick.Advertising;self.configLoaded=true;if(rsp){_tk.util.session("anxTagId",(ref=rsp[0])!=null?ref.appNexusPlacementTagId:void 0);data={s1:(ref1=rsp[0])!=null?ref1.brickTagScriptUrl:void 0,s2:(ref2=rsp[0])!=null?ref2.brickTagFrameContent:void 0};_tk.util.session("brickTag",rsp[0]);self.ensureScriptLoaded();return self.refreshAdPodsInternal(self.actionParam,true)}};Plugin.prototype.ensureScriptLoaded=function(){var btscript,cb,cfg,frameContent;if(!self.configLoaded||self.scriptLoaded){return}self.scriptLoaded=true;cfg=_tk.util.session("brickTag");if(cfg){cfg=JSON.parse(cfg)}else{cfg={}}btscript=cfg.s1+"";cb=(new Date).getTime();if(btscript.indexOf("//")>=0){loadScript(btscript.replace("%%CACHEBUSTER%%",cb))}frameContent=cfg.s2;if(frameContent){return self.iframeContent=self.iframeContent.replace("<!--REPLACEME-->",frameContent.replace("%%CACHEBUSTER%%",cb))}};Plugin.prototype.loadConfig=function(cb){var dataType,self,url;self=this;if(self.getNetworkId()||self.configLoaded){self.ensureScriptLoaded();cb();return}url="//feed.gsngrocers.com/clientconfig?cb="+formatDate()+"&sid="+self.brickid+"&callback=brickConfigCallback";dataType="json";win.brickConfigCallback=function(rsp){return self.configSuccess(rsp)};loadScript(url);return self};Plugin.prototype.refresh=function(actionParam,forceRefresh){var self;self=myBrick.Advertising;if(self.brickid){self.actionParam=actionParam;self.loadConfig(function(_this){return function(){return self.refreshAdPodsInternal(actionParam,forceRefresh)}}(this))}return this};Plugin.prototype.setDefault=function(defParam){var k,self,v;self=myBrick.Advertising;if(typeof defParam==="object"){for(k in defParam){v=defParam[k];if(v!=null){self.defP[k]=v}}}return this};Plugin.prototype.getAnxUrl=function(width,height){var cb,networkId,self,url;self=this;networkId=self.getNetworkId();cb=(new Date).getTime();return url='<script src="http://ib.adnxs.com/ttj?id='+networkId+"&size="+width+"x"+height+"&cb="+cb+'"></script>'};Plugin.prototype.createIframe=function(parentEl){var $adUnit,allData,dimensions,iframe,self;self=this;if(!self.getNetworkId()){return self}$adUnit=dom(parentEl);$adUnit.html("");allData=trakless.util.allData(parentEl);dimensions=self.getDimensions(allData);iframe=doc.createElement("iframe");iframe.className="brickframe";iframe.frameBorder="0";iframe.marginWidth="0";iframe.marginHeight="0";iframe.scrolling="no";iframe.setAttribute("border","0");iframe.setAttribute("allowtransparency","true");iframe.height=dimensions[0][1];iframe.width=dimensions[0][0];parentEl.appendChild(iframe);if(iframe.contentWindow){iframe.contentWindow.contents=self.iframeContent;iframe.src='javascript:window["contents"]';return}doc=iframe.document;if(iframe.contentDocument){doc=iframe.contentDocument}doc.open();doc.write(self.iframeContent);return doc.close()};Plugin.prototype.refreshWithTimer=function(actionParam){var self,timer;self=myBrick.Advertising;if(actionParam==null){actionParam={evtname:"refresh-timer"}}self.refresh(actionParam,true);timer=(self.timer||0)*1e3;if(timer>0){setTimeout(self.refreshWithTimer,timer)}return this};Plugin.prototype.load=function(brickid,isDebug){var self;self=myBrick.Advertising;if(brickid){self.brickid=brickid}if(isDebug){self.isDebug=true;debug.enable("bricktag")}if(self.hasLoad){return self}self.hasLoad=true;return self.refreshWithTimer({evtname:"loading"})};return Plugin}();myPlugin=new Plugin;myBrick.Advertising=myPlugin;myBrick.Advertising.brickRedirect=myPlugin.clickBrickOffer;myBrick.Advertising.clickBrand=myPlugin.clickBrand;myBrick.Advertising.clickThru=myPlugin.clickProduct;myBrick.Advertising.refreshAdPods=myPlugin.refresh;myBrick.Advertising.logAdImpression=function(){};myBrick.Advertising.logAdRequest=function(){};myBrick.Advertising.promotionRedirect=myPlugin.clickPromotion;myBrick.Advertising.verifyClickThru=myPlugin.clickLink;myBrick.Advertising.recipeRedirect=myPlugin.clickRecipe;win.Gsn=myBrick;win.bricktag=myBrick.Advertising;if(gsnContext!=null){buildqs=function(k,v){if(v!=null){v=new String(v);if(k==="ProductDescription"){v=v.replace(/&/,"`")}return k+"="+v}else{}};myBrick.Advertising.on("clickRecipe",function(data){if(data.type!=="brickevent:clickRecipe"){return}win.location.replace("/Recipes/RecipeFull.aspx?RecipeID="+data.detail.RecipeId)});myBrick.Advertising.on("clickProduct",function(data){var product,qs;if(data.type!=="brickevent:clickProduct"){return}product=data.detail;if(product){qs=new String("");qs+=buildqs("DepartmentID",product.CategoryId);qs+="~"+buildqs("BrandName",product.BrandName);qs+="~"+buildqs("ProductDescription",product.Description);qs+="~"+buildqs("ProductCode",product.ProductCode);qs+="~"+buildqs("DisplaySize",product.DisplaySize);qs+="~"+buildqs("RegularPrice",product.RegularPrice);qs+="~"+buildqs("CurrentPrice",product.CurrentPrice);qs+="~"+buildqs("SavingsAmount",product.SavingsAmount);qs+="~"+buildqs("SavingsStatement",product.SavingsStatement);qs+="~"+buildqs("Quantity",product.Quantity);qs+="~"+buildqs("AdCode",product.AdCode);qs+="~"+buildqs("CreativeID",product.CreativeId);if(typeof AddAdToShoppingList==="function"){AddAdToShoppingList(qs)}}});myBrick.Advertising.on("clickLink",function(data){var linkData,url;if(data.type!=="brickevent:clickLink"){return}linkData=data.detail;if(linkData){if(!(typeof linkData.Target==="string")){linkData.Target="_top"}if(linkData.Target==="_blank"){}else{url=_tk.util.trim(linkData.Url);if(url==="circular"){url="/Shop/WeeklyAd.aspx"}else if(url==="coupons"){url="/Shop/Coupons.aspx"}else if(url==="recipecenter"){url="/Recipes/RecipeCenter.aspx"}else if(url==="registration"){url="/Profile/SignUp.aspx"}win.location.replace(url)}}})}aPlugin=myBrick.Advertising;if(!aPlugin){return}attrs={debug:function(value){if(typeof value!=="string"){return}aPlugin.isDebug=value!=="false";if(value){return debug.enable("bricktag")}},source:function(value){if(typeof value!=="string"){return}return aPlugin.source=value},brickid:function(value){if(!value){return}aPlugin.brickid=value;return trakless.setSiteId(value)},timer:function(value){if(!value){return}return aPlugin.timer=value},cleanrefresh:function(value){if(!value){return}return aPlugin.cleanRefresh=value}};ref=doc.getElementsByTagName("script");for(i=0,len=ref.length;i<len;i++){script=ref[i];if(/bricktag/i.test(script.src)){ref1=["","data-"];for(j=0,len1=ref1.length;j<len1;j++){prefix=ref1[j];for(k in attrs){fn=attrs[k];fn(script.getAttribute(prefix+k))}}}}trakless.setPixel(config.pixelUrl);trakless.store.init({url:config.xstoreUrl,dntIgnore:true});trakless.util.ready(function(){return aPlugin.load()});module.exports=myBrick}).call(this)},{debug:2,trakless:3,"load-script-once":4,gmodal:5,dom:6}],2:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":7}],7:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:8}],8:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],3:[function(require,module,exports){var $defaults,$pixel,$sessionid,$siteid,$st,$trakless2,$userid,$uuid,Emitter,attrs,cookie,debounce,defaults,doc,docReady,domdelegate,error,error1,error2,getImage,hasNOL,isDom,lsqueue,mystore,mytrakless,myutil,query,queue,session,tracker,trakless,traklessParent,util,uuid,webanalyser,win,xstore,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};mystore=require("xstore");xstore=new mystore;Emitter=require("emitter");cookie=require("cookie");defaults=require("defaults");query=require("querystring");uuid=require("uuid");webanalyser=require("webanalyser");docReady=require("domready");debounce=require("debounce");lsqueue=require("lsqueue");domdelegate=require("delegate");queue=new lsqueue("tksq");win=window;doc=win.document;hasNOL=win.navigator.onLine;session=win.sessionStorage;$siteid=0;$pixel="//niiknow.github.io/pixel.gif";$uuid=null;$userid=null;$st=new Date((new Date).getFullYear(),0,1).getTime();$sessionid=(new Date).getTime()-$st;$defaults=null;if(typeof session==="undefined"){session={getItem:function(k){return cookie(k)},setItem:function(k,v){return cookie(k,v,{path:"/"})}}}try{$sessionid=session.getItem("tklsid");if($sessionid==null){$sessionid=(new Date).getTime()-$st;session.setItem("tklsid",$sessionid)}}catch(error){}getImage=function(cfgUrl,tks,qs,callback){var image,url;image=new Image(1,1);if(cfgUrl.indexOf("//")===0){cfgUrl=win.location.protocol==="https"?"https:"+cfgUrl:"http:"+cfgUrl}image.onload=function(){var iterator;iterator=0;if(typeof callback==="function"){callback()}};url=cfgUrl+(cfgUrl.indexOf("?")<0?"?":"&")+(tks+"&"+qs);image.src=url;return image};isDom=function(obj){if(obj!=null){if(obj.nodeName){switch(obj.nodeType){case 1:return true;case 3:return object.nodeValue!=null}}}return false};util=function(){function util(){this.lsqueue=bind(this.lsqueue,this)}util.prototype.allData=function(el){var attr,camelCaseName,data,i,k,len,name,ref;data={};if(el!=null){ref=el.attributes;for(k=i=0,len=ref.length;i<len;k=++i){attr=ref[k];name=attr.name.replace(/^data-/g,"");camelCaseName=name.replace(/-(.)/g,function($0,$1){return $1.toUpperCase()});data[camelCaseName]=attr.value}}return data};util.prototype.parseJSON=function(v){var v2;if(typeof v==="string"){if(v.indexOf("{")>=0||v.indexOf("[")>=0){v2=JSON.parse(v);if(!(v2==null)){return v2}}}return v};util.prototype.stringify=function(v){if(typeof v==="string"){return v}return JSON.stringify(v)};util.prototype.session=function(k,v){if(v!=null){if(!(typeof v==="string")){v=this.stringify(v)}cookie("tls_"+k,v,{path:"/"});return v}v=cookie("tls_"+k);if(typeof v==="undefined"){return v}return this.parseJSON(v)};util.prototype.cookie=cookie;util.prototype.ready=docReady;util.prototype.Emitter=Emitter;util.prototype.trim=function(v){return v.replace(/^\s+|\s+$/gm,"")};util.prototype.listen=domdelegate;util.prototype.debounce=debounce;util.prototype.lsqueue=function(name){return new lsqueue(name||"tkdefault")};return util}();myutil=new util;tracker=function(){function tracker(){}tracker.prototype.pixel="//niiknow.github.io/pixel.gif";tracker.prototype.siteid=0;tracker.prototype.store=null;tracker.prototype.uuid=null;tracker.prototype.getId=function(){var self;self=this;return(self.siteid+"-"+self.pixel).replace(/[^a-zA-z]/gi,"$")};tracker.prototype._tk=function(data,ht,pixel){var k,myData,self,tkd,v;self=this;tkd={uuid:self.uuid,siteid:self.siteid,usid:$sessionid,ht:ht,z:data.z};if($userid){tkd.uid=$userid}myData={};for(k in data){v=data[k];if(v!=null){if(!(typeof v==="string")||myutil.trim(v).length>0){if(k+""!=="undefined"&&k!=="uuid"&&k!=="z"&&!isDom(v)){if(typeof v==="boollean"){v=v?1:0}myData[k]=v}}}}self.emit("track",{ht:ht,pixel:pixel,qs:[tkd,myData]});getImage(pixel,query.stringify(tkd),query.stringify(myData));self.emit("tracked",{ht:ht,pixel:pixel,qs:[tkd,myData]});return self};tracker.prototype._track=function(ht,ctx){var pixel,self;self=this;if(ctx==null){ctx={}}if(self.siteid>0){pixel=myutil.trim(this.pixel);if(!self.uuid){self.uuid=uuid();$uuid=self.uuid;if(self.store!=null){self.store.get("tklsuid").then(function(id){if(!id){self.store.set("tklsuid",self.uuid)}self.uuid=id||self.uuid;$uuid=self.uuid;return self._tk(ctx,ht,pixel)})}session.setItem("tklsuid",$uuid)}else{self._tk(ctx,ht,pixel)}}return this};tracker.prototype.track=function(ht,ctx){var self;self=this;myutil.ready(function(){ctx=ctx||{};if(!ctx.z){ctx.z=(new Date).getTime()-$st}return self._track(ht||"custom",ctx)});return this};return tracker}();Emitter(tracker.prototype);mytrakless=function(){function mytrakless(){var self;self=this;self._track=debounce(function(){var item,k,ref,v;self=this;if(!hasNOL||win.navigator.onLine){item=queue.pop();if(item!=null){self.emit("track",item);ref=self.trackers;for(k in ref){v=ref[k];v.track(item.ht,item.ctx)}return self.emit("tracked",item)}}},222);return self}mytrakless.prototype.trackers={};mytrakless.prototype.setSiteId=function(siteid){var mysid;mysid=siteid+"";$siteid=mysid!=="undefined"&&mysid.length>0?mysid:$siteid};mytrakless.prototype.setPixel=function(pixelUrl){if(pixelUrl){$pixel=pixelUrl||$pixel}};mytrakless.prototype.setUserId=function(id){if(id){$userid=id||$userid}};mytrakless.prototype.store=xstore;mytrakless.prototype.getTracker=function(siteid,pixelUrl){var id,rst,self;self=this;rst=new tracker;rst.siteid=siteid!=null?siteid:$siteid;rst.pixel=pixelUrl!=null?pixelUrl:$pixel;if(rst.siteid!=null&&rst.pixel!=null){rst.store=xstore;id=rst.getId();if(!self.trackers[id]){self.trackers[id]=rst;rst.on("tracked",self._track)}return self.trackers[id]}throw"siteid or pixelUrl is required"};mytrakless.prototype.getDefaultTracker=function(){var id,self;self=this;id=($siteid+"-"+$pixel).replace(/[^a-zA-z]/gi,"$");if(self.trackers[id]==null){self.getTracker()}return self.trackers[id]};mytrakless.prototype.util=myutil;mytrakless.prototype.event=function(category,action,label,property,value,extra){extra=extra||{};if(!isNaN(parseInt(value))){extra.ev=value}extra.ec=category||"event";if(action){extra.ea=action}if(label){extra.el=label}if(property){extra.ep=property}return this.track("event",extra)};mytrakless.prototype.pageview=function(ctx){return this.track("pageview",ctx)};mytrakless.prototype.track=function(ht,ctx){var self;self=this;self.getDefaultTracker();ctx=ctx||{};ctx.z=(new Date).getTime()-$st;queue.push({ht:ht,ctx:ctx,uuid:$uuid,usid:$sessionid,uid:$userid});self._track();return self};mytrakless.prototype.emitTop=function(en,ed){if(typeof $trakless2!=="undefined"&&$trakless2!==null){$trakless2.emit(en,ed)}return this};mytrakless.prototype.parseScriptAttributes=function(srcMatch,attrsHandler){var fn,i,k,len,prefix,ref,results,script,toMatch;toMatch=new RegExp(srcMatch,"i");ref=win.document.getElementsByTagName("script");results=[];for(i=0,len=ref.length;i<len;i++){script=ref[i];if(toMatch.test(script.src)){results.push(function(){var j,len1,ref1,results1;ref1=["","data-"];results1=[];for(j=0,len1=ref1.length;j<len1;j++){prefix=ref1[j];results1.push(function(){var results2;results2=[];for(k in attrsHandler){fn=attrsHandler[k];results2.push(fn(script.getAttribute(prefix+k)))}return results2}())}return results1}())}else{results.push(void 0)}}return results};return mytrakless}();trakless=new mytrakless;Emitter(trakless);$trakless2=trakless;if(win.top!==win){try{traklessParent=win.top.trakless;$trakless2=traklessParent}catch(error1){try{$trakless2=win.parent.trakless}catch(error2){$trakless2=null}}}trakless.on("track",function(item){var myDef;if(item.ht==="pageview"){myDef=webanalyser.get();return item.ctx=defaults(item.ctx,myDef)}});attrs={site:function(value){return trakless.setSiteId(value)},pixel:function(value){if(typeof value!=="string"){return}return trakless.setPixel(value)}};trakless.parseScriptAttributes("trakless",attrs);win.trakless=trakless;win._tk=trakless;module.exports=trakless},{xstore:9,emitter:10,cookie:11,defaults:12,querystring:13,uuid:14,webanalyser:15,domready:16,debounce:17,lsqueue:18,delegate:19}],9:[function(require,module,exports){(function(win){var cacheBust,cookie,debug,delay,dnt,doc,load,log,maxStore,mydeferred,myproxy,myq,onMessage,q,randomHash,store,usePostMessage,xstore;doc=win.document;debug=require("debug");log=debug("xstore");load=require("load-iframe");store=require("store.js");cookie=require("cookie");usePostMessage=win.postMessage!=null;cacheBust=0;delay=333;maxStore=6e3*60*24*777;myq=[];q=setInterval(function(){if(myq.length>0){return myq.shift()()}},delay+5);dnt=win.navigator.doNotTrack||win.navigator.msDoNotTrack||win.doNotTrack;onMessage=function(fn){if(win.addEventListener){return win.addEventListener("message",fn,false)}else{return win.attachEvent("onmessage",fn)}};mydeferred=function(){var i,k,len,ref,v;function mydeferred(){}mydeferred.prototype.q=function(xs,event,item){var d,dh,self;self=this;self.mycallbacks=[];self.myerrorbacks=[];dh=randomHash();d=[0,dh,event,item.k,item.v];xs.dob[dh]=self;if(usePostMessage){xs.doPostMessage(xs,JSON.stringify(d))}else{if(xs.iframe!==null){cacheBust+=1;d[0]=+new Date+cacheBust;xs.hash="#"+JSON.stringify(d);if(xs.iframe.src){xs.iframe.src=""+proxyPage+xs.hash}else if(xs.iframe.contentWindow!=null&&xs.iframe.contentWindow.location!=null){xs.iframe.contentWindow.location=""+proxyPage+xs.hash}else{xs.iframe.setAttribute("src",""+proxyPage+xs.hash)}}}self.then=function(fn,fnErr){if(fnErr){self.myerrorbacks.push(fnErr)}self.mycallbacks.push(fn);return self};return self};mydeferred.prototype.myresolve=function(data){var i,k,len,ref,self,v;self=this;ref=self.mycallbacks||[];for(k=i=0,len=ref.length;i<len;k=++i){v=ref[k];v(data)}return self};mydeferred.prototype.myreject=function(e){var self;return self=this};ref=self.myerrorbacks||[];for(k=i=0,len=ref.length;i<len;k=++i){v=ref[k];v(data)}self;return mydeferred}();myproxy=function(){function myproxy(){}myproxy.prototype.delay=333;myproxy.prototype.hash=win.location.hash;myproxy.prototype.init=function(){var self;self=this;if(usePostMessage){return onMessage(self.handleProxyMessage)}else{return setInterval(function(){var newhash;newhash=win.location.hash;if(newhash!==xs.hash){xs.hash=newhash;self.handleProxyMessage({data:JSON.parse(newhash.substr(1))})}},self.delay)}};myproxy.prototype.handleProxyMessage=function(e){var d,error,hash,id,key,method,myCacheBust,mystore,self;d=e.data;if(typeof d==="string"){if(/^xstore-/.test(d)){d=d.split(",")}else{try{d=JSON.parse(d)}catch(error){return}}}if(!(d instanceof Array)){return}id=d[1];if(!/^xstore-/.test(id)){return}self=this;key=d[3]||"xstore";method=d[2];cacheBust=0;mystore=store;if(!store.enabled){mystore={get:function(k){return cookie(key)},set:function(k,v){return cookie(k,v,{maxage:maxStore})},remove:function(k){return cookie(k,null)},clear:function(){var cookies,i,idx,k,len,name,results,v;cookies=doc.cookie.split(";");results=[];for(k=i=0,len=cookies.length;i<len;k=++i){v=cookies[k];idx=v.indexOf("=");name=idx>-1?v.substr(0,idx):v;results.push(doc.cookie=name+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT")}return results}}}if(method==="get"){d[4]=mystore.get(key)}else if(method==="set"){mystore.set(key,d[4])}else if(method==="remove"){mystore.remove(key)}else if(method==="clear"){mystore.clear()}else{d[2]="error-"+method}d[1]=id.replace("xstore-","xstoreproxy-");if(usePostMessage){e.source.postMessage(JSON.stringify(d),"*")}else{cacheBust+=1;myCacheBust=+new Date+cacheBust;d[0]=myCacheBust;hash="#"+JSON.stringify(d);win.location=win.location.href.replace(win.location.hash,"")+hash}};return myproxy}();randomHash=function(){var rh;rh=Math.random().toString(36).substr(2);return"xstore-"+rh};xstore=function(){function xstore(){}xstore.prototype.hasInit=false;xstore.prototype.debug=debug;xstore.prototype.proxyPage="//niiknow.github.io/xstore/xstore.html";xstore.prototype.iframe=null;xstore.prototype.proxyWin=null;xstore.prototype.hash=null;

xstore.prototype.tempStore={};xstore.prototype.dob={};xstore.prototype.get=function(k){this.init();if(dnt){return{then:function(fn){return fn(self.tempStore[k])}}}return(new mydeferred).q(this,"get",{k:k})};xstore.prototype.set=function(k,v){this.init();if(dnt){return{then:function(fn){self.tempStore[k]=v;return fn(self.tempStore[k])}}}return(new mydeferred).q(this,"set",{k:k,v:v})};xstore.prototype.remove=function(k){this.init();if(dnt){return{then:function(fn){delete self.tempStore[k];return fn}}}return(new mydeferred).q(this,"remove",{k:k})};xstore.prototype.clear=function(){this.init();if(dnt){return{then:function(fn){self.tempStore={};return fn}}}return(new mydeferred).q(this,"clear")};xstore.prototype.doPostMessage=function(xs,msg){if(xs.proxyWin!=null){clearInterval(q);xs.proxyWin.postMessage(msg,"*")}return myq.push(function(){return xs.doPostMessage(xs,msg)})};xstore.prototype.handleMessageEvent=function(e){var d,di,error,id,self;self=this;d=e.data;if(typeof d==="string"){if(/^xstoreproxy-/.test(d)){d=d.split(",")}else{try{d=JSON.parse(d)}catch(error){return}}}if(!(d instanceof Array)){return}id=d[1];if(!/^xstoreproxy-/.test(id)){return}id=id.replace("xstoreproxy-","xstore-");di=self.dob[id];if(di){if(/^error-/.test(d[2])){di.myreject(d[2])}else{di.myresolve(d[4])}return self.dob[id]=null}};xstore.prototype.init=function(options){var iframe,self;self=this;if(self.hasInit){return self}self.hasInit=true;options=options||{};if(options.isProxy){log("init proxy");(new myproxy).init();return self}self.proxyPage=options.url||self.proxyPage;if(options.dntIgnore||typeof dnt==="undefined"||dnt==="unspecified"||dnt==="no"||dnt==="0"){log("disable dnt");dnt=false}log("init storeage dnt = "+dnt);return iframe=load(self.proxyPage,function(){log("iframe loaded");self.proxyWin=iframe.contentWindow;if(!usePostMessage){self.hash=proxyWin.location.hash;return setInterval(function(){if(proxyWin.location.hash!==hash){self.hash=proxyWin.location.hash;self.handleMessageEvent({origin:proxyDomain,data:self.hash.substr(1)})}},delay)}else{return onMessage(function(){return self.handleMessageEvent(arguments[0])})}})};return xstore}();return module.exports=xstore})(window)},{debug:20,"load-iframe":21,"store.js":22,cookie:23}],20:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":24}],24:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:8}],21:[function(require,module,exports){var onload=require("script-onload");var tick=require("next-tick");var type=require("type");module.exports=function loadIframe(options,fn){if(!options)throw new Error("Cant load nothing...");if("string"==type(options))options={src:options};var https=document.location.protocol==="https:"||document.location.protocol==="chrome-extension:";if(options.src&&options.src.indexOf("//")===0){options.src=https?"https:"+options.src:"http:"+options.src}if(https&&options.https)options.src=options.https;else if(!https&&options.http)options.src=options.http;var iframe=document.createElement("iframe");iframe.src=options.src;iframe.width=options.width||1;iframe.height=options.height||1;iframe.style.display="none";if("function"==type(fn)){onload(iframe,fn)}tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(iframe,firstScript)});return iframe}},{"script-onload":25,"next-tick":26,type:27}],25:[function(require,module,exports){module.exports=function(el,fn){return el.addEventListener?add(el,fn):attach(el,fn)};function add(el,fn){el.addEventListener("load",function(_,e){fn(null,e)},false);el.addEventListener("error",function(e){var err=new Error('script error "'+el.src+'"');err.event=e;fn(err)},false)}function attach(el,fn){el.attachEvent("onreadystatechange",function(e){if(!/complete|loaded/.test(el.readyState))return;fn(null,e)});el.attachEvent("onerror",function(e){var err=new Error('failed to load the script "'+el.src+'"');err.event=e||window.event;fn(err)})}},{}],26:[function(require,module,exports){"use strict";if(typeof setImmediate=="function"){module.exports=function(f){setImmediate(f)}}else if(typeof process!="undefined"&&typeof process.nextTick=="function"){module.exports=process.nextTick}else if(typeof window=="undefined"||window.ActiveXObject||!window.postMessage){module.exports=function(f){setTimeout(f)}}else{var q=[];window.addEventListener("message",function(){var i=0;while(i<q.length){try{q[i++]()}catch(e){q=q.slice(i);window.postMessage("tic!","*");throw e}}q.length=0},true);module.exports=function(fn){if(!q.length)window.postMessage("tic!","*");q.push(fn)}}},{}],27:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}if(val===null)return"null";if(val===undefined)return"undefined";if(val!==val)return"nan";if(val&&val.nodeType===1)return"element";if(isBuffer(val))return"buffer";val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val);return typeof val};function isBuffer(obj){return!!(obj!=null&&(obj._isBuffer||obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)))}},{}],22:[function(require,module,exports){"use strict";(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.store=factory()}})(this,function(){var store={},win=typeof window!="undefined"?window:global,doc=win.document,localStorageName="localStorage",scriptTag="script",storage;store.disabled=false;store.version="1.3.20";store.set=function(key,value){};store.get=function(key,defaultVal){};store.has=function(key){return store.get(key)!==undefined};store.remove=function(key){};store.clear=function(){};store.transact=function(key,defaultVal,transactionFn){if(transactionFn==null){transactionFn=defaultVal;defaultVal=null}if(defaultVal==null){defaultVal={}}var val=store.get(key,defaultVal);transactionFn(val);store.set(key,val)};store.getAll=function(){};store.forEach=function(){};store.serialize=function(value){return JSON.stringify(value)};store.deserialize=function(value){if(typeof value!="string"){return undefined}try{return JSON.parse(value)}catch(e){return value||undefined}};function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return false}}if(isLocalStorageNameSupported()){storage=win[localStorageName];store.set=function(key,val){if(val===undefined){return store.remove(key)}storage.setItem(key,store.serialize(val));return val};store.get=function(key,defaultVal){var val=store.deserialize(storage.getItem(key));return val===undefined?defaultVal:val};store.remove=function(key){storage.removeItem(key)};store.clear=function(){storage.clear()};store.getAll=function(){var ret={};store.forEach(function(key,val){ret[key]=val});return ret};store.forEach=function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);callback(key,store.get(key))}}}else if(doc&&doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile");storageContainer.open();storageContainer.write("<"+scriptTag+">document.w=window</"+scriptTag+'><iframe src="/favicon.ico"></iframe>');storageContainer.close();storageOwner=storageContainer.w.frames[0].document;storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div");storageOwner=doc.body}var withIEStorage=function(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage);storageOwner.appendChild(storage);storage.addBehavior("#default#userData");storage.load(localStorageName);var result=storeFunction.apply(store,args);storageOwner.removeChild(storage);return result}};var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");var ieKeyFix=function(key){return key.replace(/^d/,"___$&").replace(forbiddenCharsRegex,"___")};store.set=withIEStorage(function(storage,key,val){key=ieKeyFix(key);if(val===undefined){return store.remove(key)}storage.setAttribute(key,store.serialize(val));storage.save(localStorageName);return val});store.get=withIEStorage(function(storage,key,defaultVal){key=ieKeyFix(key);var val=store.deserialize(storage.getAttribute(key));return val===undefined?defaultVal:val});store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key);storage.removeAttribute(key);storage.save(localStorageName)});store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=attributes.length-1;i>=0;i--){storage.removeAttribute(attributes[i].name)}storage.save(localStorageName)});store.getAll=function(storage){var ret={};store.forEach(function(key,val){ret[key]=val});return ret};store.forEach=withIEStorage(function(storage,callback){var attributes=storage.XMLDocument.documentElement.attributes;for(var i=0,attr;attr=attributes[i];++i){callback(attr.name,store.deserialize(storage.getAttribute(attr.name)))}})}try{var testKey="__storejs__";store.set(testKey,testKey);if(store.get(testKey)!=testKey){store.disabled=true}store.remove(testKey)}catch(e){store.disabled=true}store.enabled=!store.disabled;return store})},{}],23:[function(require,module,exports){var debug=require("debug")("cookie");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+"="+encode(value);if(null==value)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+="; path="+options.path;if(options.domain)str+="; domain="+options.domain;if(options.expires)str+="; expires="+options.expires.toUTCString();if(options.secure)str+="; secure";document.cookie=str}function all(){var str;try{str=document.cookie}catch(err){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(err.stack||err)}return{}}return parse(str)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(""==pairs[0])return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split("=");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug("error `encode(%o)` - %o",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug("error `decode(%o)` - %o",value,e)}}},{debug:2}],10:[function(require,module,exports){var index=require("indexof");module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}fn._off=on;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var i=index(callbacks,fn._off||fn);if(~i)callbacks.splice(i,1);return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{indexof:28}],28:[function(require,module,exports){module.exports=function(arr,obj){if(arr.indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},{}],11:[function(require,module,exports){var debug=require("debug")("cookie");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+"="+encode(value);if(null==value)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+="; path="+options.path;if(options.domain)str+="; domain="+options.domain;if(options.expires)str+="; expires="+options.expires.toUTCString();if(options.secure)str+="; secure";document.cookie=str}function all(){return parse(document.cookie)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(""==pairs[0])return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split("=");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug("error `encode(%o)` - %o",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug("error `decode(%o)` - %o",value,e)}}},{debug:2}],12:[function(require,module,exports){"use strict";var defaults=function(dest,src,recursive){for(var prop in src){if(!src.hasOwnProperty(prop)){continue}if(recursive&&dest[prop]instanceof Object&&src[prop]instanceof Object){dest[prop]=defaults(dest[prop],src[prop],true)}else if(!(prop in dest)){dest[prop]=src[prop]}}return dest};module.exports=defaults},{}],13:[function(require,module,exports){var encode=encodeURIComponent;var decode=decodeURIComponent;var trim=require("trim");var type=require("type");exports.parse=function(str){if("string"!=typeof str)return{};str=trim(str);if(""==str)return{};if("?"==str.charAt(0))str=str.slice(1);var obj={};var pairs=str.split("&");for(var i=0;i<pairs.length;i++){var parts=pairs[i].split("=");var key=decode(parts[0]);var m;if(m=/(\w+)\[(\d+)\]/.exec(key)){obj[m[1]]=obj[m[1]]||[];obj[m[1]][m[2]]=decode(parts[1]);continue}obj[parts[0]]=null==parts[1]?"":decode(parts[1])}return obj};exports.stringify=function(obj){if(!obj)return"";var pairs=[];for(var key in obj){var value=obj[key];if("array"==type(value)){for(var i=0;i<value.length;++i){pairs.push(encode(key+"["+i+"]")+"="+encode(value[i]))}continue}pairs.push(encode(key)+"="+encode(obj[key]))}return pairs.join("&")}},{trim:29,type:27}],29:[function(require,module,exports){exports=module.exports=trim;function trim(str){if(str.trim)return str.trim();return str.replace(/^\s*|\s*$/g,"")}exports.left=function(str){if(str.trimLeft)return str.trimLeft();return str.replace(/^\s*/,"")};exports.right=function(str){if(str.trimRight)return str.trimRight();return str.replace(/\s*$/,"")}},{}],14:[function(require,module,exports){module.exports=function uuid(a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,uuid)}},{}],15:[function(require,module,exports){(function(win){"use strict";var $df,$doc,$loc,$nav,$scr,$win,defaults,fd,result,webanalyser;defaults=require("defaults");fd=require("flashdetect");$win=win;$doc=$win.document;$nav=$win.navigator;$scr=$win.screen;$loc=$win.location;$df={sr:$scr.width+"x"+$scr.height,vp:$scr.availWidth+"x"+$scr.availHeight,sd:$scr.colorDepth,je:$nav.javaEnabled?$nav.javaEnabled()?1:0:0,ul:$nav.languages?$nav.languages[0]:$nav.language||$nav.userLanguage||$nav.browserLanguage};webanalyser=function(){function webanalyser(){}webanalyser.prototype.get=function(){var rst;if($df.z==null){rst={dr:$doc.referrer,dh:$loc.hostname,z:(new Date).getTime()};if(fd.installed){rst.fl=fd.major+" "+fd.minor+" "+fd.revisionStr}$df=defaults(rst,$df)}$df.dl=$loc.href;$df.dt=$doc.title;return $df};webanalyser.prototype.windowSize=function(){var rst;rst={w:0,h:0};if(typeof $win.innerWidth==="number"){rst.w=$win.innerWidth;rst.h=$win.innerHeight}else if($doc.documentElement&&($doc.documentElement.clientWidth||$doc.documentElement.clientHeight)){rst.w=$doc.documentElement.clientWidth;rst.h=$doc.documentElement.clientHeight}else if($doc.body&&($doc.body.clientWidth||$doc.body.clientHeight)){rst.w=$doc.body.clientWidth;rst.h=$doc.body.clientHeight}return rst};return webanalyser}();result=new webanalyser;return module.exports=result})(window)},{defaults:30,flashdetect:31}],30:[function(require,module,exports){"use strict";var defaults=function(dest,src,recursive){for(var prop in src){if(recursive&&dest[prop]instanceof Object&&src[prop]instanceof Object){dest[prop]=defaults(dest[prop],src[prop],true)}else if(!(prop in dest)){dest[prop]=src[prop]}}return dest};module.exports=defaults},{}],31:[function(require,module,exports){var flashdetect=new function(){var self=this;self.installed=false;self.raw="";self.major=-1;self.minor=-1;self.revision=-1;self.revisionStr="";var activeXDetectRules=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(obj){return getActiveXVersion(obj)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(obj){var version="6,0,21";try{obj.AllowScriptAccess="always";version=getActiveXVersion(obj)}catch(err){}return version}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(obj){return getActiveXVersion(obj)}}];var getActiveXVersion=function(activeXObj){var version=-1;try{version=activeXObj.GetVariable("$version")}catch(err){}return version};var getActiveXObject=function(name){var obj=-1;try{obj=new ActiveXObject(name)}catch(err){obj={activeXError:true}}return obj};var parseActiveXVersion=function(str){var versionArray=str.split(",");return{raw:str,major:parseInt(versionArray[0].split(" ")[1],10),minor:parseInt(versionArray[1],10),revision:parseInt(versionArray[2],10),revisionStr:versionArray[2]}};var parseStandardVersion=function(str){var descParts=str.split(/ +/);var majorMinor=descParts[2].split(/\./);var revisionStr=descParts[3];return{raw:str,major:parseInt(majorMinor[0],10),minor:parseInt(majorMinor[1],10),revisionStr:revisionStr,revision:parseRevisionStrToInt(revisionStr)}};var parseRevisionStrToInt=function(str){return parseInt(str.replace(/[a-zA-Z]/g,""),10)||self.revision};self.majorAtLeast=function(version){return self.major>=version};self.minorAtLeast=function(version){return self.minor>=version};self.revisionAtLeast=function(version){return self.revision>=version};self.versionAtLeast=function(major){var properties=[self.major,self.minor,self.revision];var len=Math.min(properties.length,arguments.length);for(i=0;i<len;i++){if(properties[i]>=arguments[i]){if(i+1<len&&properties[i]==arguments[i]){continue}else{return true}}else{return false}}};self.flashdetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var type="application/x-shockwave-flash";var mimeTypes=navigator.mimeTypes;if(mimeTypes&&mimeTypes[type]&&mimeTypes[type].enabledPlugin&&mimeTypes[type].enabledPlugin.description){var version=mimeTypes[type].enabledPlugin.description;var versionObj=parseStandardVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revisionStr=versionObj.revisionStr;self.revision=versionObj.revision;self.installed=true}}else if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){var version=-1;for(var i=0;i<activeXDetectRules.length&&version==-1;i++){var obj=getActiveXObject(activeXDetectRules[i].name);if(!obj.activeXError){self.installed=true;version=activeXDetectRules[i].version(obj);if(version!=-1){var versionObj=parseActiveXVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revision=versionObj.revision;self.revisionStr=versionObj.revisionStr}}}}}()};flashdetect.JS_RELEASE="1.0.4";module.exports=flashdetect},{}],16:[function(require,module,exports){!function(name,definition){if(typeof module!="undefined")module.exports=definition();else if(typeof define=="function"&&typeof define.amd=="object")define(definition);else this[name]=definition()}("domready",function(ready){var fns=[],fn,f=false,doc=document,testEl=doc.documentElement,hack=testEl.doScroll,domContentLoaded="DOMContentLoaded",addEventListener="addEventListener",onreadystatechange="onreadystatechange",readyState="readyState",loadedRgx=hack?/^loaded|^c/:/^loaded|c/,loaded=loadedRgx.test(doc[readyState]);function flush(f){loaded=1;while(f=fns.shift())f()}doc[addEventListener]&&doc[addEventListener](domContentLoaded,fn=function(){doc.removeEventListener(domContentLoaded,fn,f);flush()},f);hack&&doc.attachEvent(onreadystatechange,fn=function(){if(/^c/.test(doc[readyState])){doc.detachEvent(onreadystatechange,fn);flush()}});return ready=hack?function(fn){self!=top?loaded?fn():fns.push(fn):function(){try{testEl.doScroll("left")}catch(e){return setTimeout(function(){ready(fn)},50)}fn()}()}:function(fn){loaded?fn():fns.push(fn)}})},{}],17:[function(require,module,exports){var now=require("date-now");module.exports=function debounce(func,wait,immediate){var timeout,args,context,timestamp,result;if(null==wait)wait=100;function later(){var last=now()-timestamp;if(last<wait&&last>0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}}return function debounced(){context=this;args=arguments;timestamp=now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}}},{"date-now":32}],32:[function(require,module,exports){module.exports=Date.now||now;function now(){return(new Date).getTime()}},{}],18:[function(require,module,exports){var debounce,lsqueue,store;require("json-fallback");debounce=require("debounce");store=require("store.js");lsqueue=function(){function lsqueue(name){var self;self=this;self.qn=name||"queue";self.items=[];self.persist=debounce(function(){if(!store.enabled){return self}try{store.set(self.qn,self.items)}catch(_error){}return self},111);return self}lsqueue.prototype.push=function(v){var self;self=this;self.items.push(v);self.persist();return self};lsqueue.prototype.pop=function(){var rst,self;self=this;if(self.items.length>0){rst=self.items.shift();self.persist();return rst}};lsqueue.prototype.clear=function(){var self;self=this;self.items=[];self.persist();return self};return lsqueue}();module.exports=lsqueue},{"json-fallback":33,debounce:17,"store.js":34}],33:[function(require,module,exports){(function(){"use strict";var JSON=module.exports={};function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})()},{}],34:[function(require,module,exports){"use strict";(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.store=factory()}})(this,function(){var store={},win=typeof window!="undefined"?window:global,doc=win.document,localStorageName="localStorage",scriptTag="script",storage;store.disabled=false;store.version="1.3.20";store.set=function(key,value){};store.get=function(key,defaultVal){};store.has=function(key){return store.get(key)!==undefined};store.remove=function(key){};store.clear=function(){};store.transact=function(key,defaultVal,transactionFn){if(transactionFn==null){transactionFn=defaultVal;defaultVal=null}if(defaultVal==null){defaultVal={}}var val=store.get(key,defaultVal);transactionFn(val);store.set(key,val)};store.getAll=function(){};store.forEach=function(){};store.serialize=function(value){return JSON.stringify(value)};store.deserialize=function(value){if(typeof value!="string"){return undefined}try{return JSON.parse(value)}catch(e){return value||undefined}};function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return false}}if(isLocalStorageNameSupported()){storage=win[localStorageName];store.set=function(key,val){if(val===undefined){return store.remove(key)}storage.setItem(key,store.serialize(val));return val};store.get=function(key,defaultVal){var val=store.deserialize(storage.getItem(key));return val===undefined?defaultVal:val};store.remove=function(key){storage.removeItem(key)};store.clear=function(){storage.clear()};store.getAll=function(){var ret={};store.forEach(function(key,val){ret[key]=val});return ret};store.forEach=function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);callback(key,store.get(key))}}}else if(doc&&doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile");storageContainer.open();storageContainer.write("<"+scriptTag+">document.w=window</"+scriptTag+'><iframe src="/favicon.ico"></iframe>');storageContainer.close();storageOwner=storageContainer.w.frames[0].document;storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div");storageOwner=doc.body}var withIEStorage=function(storeFunction){
return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage);storageOwner.appendChild(storage);storage.addBehavior("#default#userData");storage.load(localStorageName);var result=storeFunction.apply(store,args);storageOwner.removeChild(storage);return result}};var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");var ieKeyFix=function(key){return key.replace(/^d/,"___$&").replace(forbiddenCharsRegex,"___")};store.set=withIEStorage(function(storage,key,val){key=ieKeyFix(key);if(val===undefined){return store.remove(key)}storage.setAttribute(key,store.serialize(val));storage.save(localStorageName);return val});store.get=withIEStorage(function(storage,key,defaultVal){key=ieKeyFix(key);var val=store.deserialize(storage.getAttribute(key));return val===undefined?defaultVal:val});store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key);storage.removeAttribute(key);storage.save(localStorageName)});store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=attributes.length-1;i>=0;i--){storage.removeAttribute(attributes[i].name)}storage.save(localStorageName)});store.getAll=function(storage){var ret={};store.forEach(function(key,val){ret[key]=val});return ret};store.forEach=withIEStorage(function(storage,callback){var attributes=storage.XMLDocument.documentElement.attributes;for(var i=0,attr;attr=attributes[i];++i){callback(attr.name,store.deserialize(storage.getAttribute(attr.name)))}})}try{var testKey="__storejs__";store.set(testKey,testKey);if(store.get(testKey)!=testKey){store.disabled=true}store.remove(testKey)}catch(e){store.disabled=true}store.enabled=!store.disabled;return store})},{}],19:[function(require,module,exports){var closest=require("closest"),event=require("event");exports.bind=function(el,selector,type,fn,capture){return event.bind(el,type,function(e){var target=e.target||e.srcElement;e.delegateTarget=closest(target,selector,true,el);if(e.delegateTarget)fn.call(el,e)},capture)};exports.unbind=function(el,type,fn,capture){event.unbind(el,type,fn,capture)}},{closest:35,event:36}],35:[function(require,module,exports){try{var matches=require("matches-selector")}catch(err){var matches=require("component-matches-selector")}module.exports=closest;function closest(el,selector,scope){scope=scope||document.documentElement;while(el&&el!==scope){if(matches(el,selector))return el;el=el.parentNode}return matches(el,selector)?el:null}},{"matches-selector":37,"component-matches-selector":37}],37:[function(require,module,exports){try{var query=require("query")}catch(err){var query=require("component-query")}var proto=Element.prototype;var vendor=proto.matches||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match;function match(el,selector){if(!el||el.nodeType!==1)return false;if(vendor)return vendor.call(el,selector);var nodes=query.all(selector,el.parentNode);for(var i=0;i<nodes.length;++i){if(nodes[i]==el)return true}return false}},{query:38,"component-query":38}],38:[function(require,module,exports){function one(selector,el){return el.querySelector(selector)}exports=module.exports=function(selector,el){el=el||document;return one(selector,el)};exports.all=function(selector,el){el=el||document;return el.querySelectorAll(selector)};exports.engine=function(obj){if(!obj.one)throw new Error(".one callback required");if(!obj.all)throw new Error(".all callback required");one=obj.one;exports.all=obj.all;return exports}},{}],36:[function(require,module,exports){var bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix=bind!=="addEventListener"?"on":"";exports.bind=function(el,type,fn,capture){el[bind](prefix+type,fn,capture||false);return fn};exports.unbind=function(el,type,fn,capture){el[unbind](prefix+type,fn,capture||false);return fn}},{}],4:[function(require,module,exports){var debug=require("debug")("load-script-once");var find=require("find");var load=require("load-script");var nextTick=require("next-tick");var memoize=require("memoize-async");var url=require("url");load=memoize(load,canonical);module.exports=function(options,callback){callback=callback||function(){};var src=typeof options==="string"?options:chooseUrl(options);if(!src)throw new Error("Could not parse the options!");debug("loading: %s",src);var scripts=document.getElementsByTagName("script");var canonicalized=canonical(src);var exists=find(scripts,function(script){return canonical(script.src)===canonicalized});if(exists){debug("exists: %s",src);return nextTick(callback)}load(src,callback)};function canonical(href){var parsed=url.parse(href);var canonical="";if(parsed.protocol)canonical+=parsed.protocol;canonical+="//";if(parsed.hostname)canonical+=parsed.hostname;if(parsed.pathname)canonical+=parsed.pathname;return canonical}function chooseUrl(options){var protocol=document.location.protocol;var https=protocol==="https:"||protocol==="chrome-extension:";var protocolSrc=https?options.https:options.http;var src=options.src||protocolSrc;if(src&&src.indexOf("//")===0){return https?"https:"+src:"http:"+src}return src}},{debug:39,find:40,"load-script":41,"next-tick":26,"memoize-async":42,url:43}],39:[function(require,module,exports){if("undefined"==typeof window){module.exports=require("./lib/debug")}else{module.exports=require("./debug")}},{"./lib/debug":44,"./debug":45}],44:[function(require,module,exports){var tty=require("tty");module.exports=debug;var names=[],skips=[];(process.env.DEBUG||"").split(/[\s,]+/).forEach(function(name){name=name.replace("*",".*?");if(name[0]==="-"){skips.push(new RegExp("^"+name.substr(1)+"$"))}else{names.push(new RegExp("^"+name+"$"))}});var colors=[6,2,3,4,5,1];var prev={};var prevColor=0;var isatty=tty.isatty(2);function color(){return colors[prevColor++%colors.length]}function humanize(ms){var sec=1e3,min=60*1e3,hour=60*min;if(ms>=hour)return(ms/hour).toFixed(1)+"h";if(ms>=min)return(ms/min).toFixed(1)+"m";if(ms>=sec)return(ms/sec|0)+"s";return ms+"ms"}function debug(name){function disabled(){}disabled.enabled=false;var match=skips.some(function(re){return re.test(name)});if(match)return disabled;match=names.some(function(re){return re.test(name)});if(!match)return disabled;var c=color();function colored(fmt){var curr=new Date;var ms=curr-(prev[name]||curr);prev[name]=curr;fmt="  [9"+c+"m"+name+" "+"[3"+c+"m[90m"+fmt+"[3"+c+"m"+" +"+humanize(ms)+"[0m";console.error.apply(this,arguments)}function plain(fmt){fmt=(new Date).toUTCString()+" "+name+" "+fmt;console.error.apply(this,arguments)}colored.enabled=plain.enabled=true;return isatty||process.env.DEBUG_COLORS?colored:plain}},{}],45:[function(require,module,exports){module.exports=debug;function debug(name){if(!debug.enabled(name))return function(){};return function(fmt){var curr=new Date;var ms=curr-(debug[name]||curr);debug[name]=curr;fmt=name+" "+fmt+" +"+debug.humanize(ms);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}}debug.names=[];debug.skips=[];debug.enable=function(name){try{localStorage.debug=name}catch(e){}var split=(name||"").split(/[\s,]+/),len=split.length;for(var i=0;i<len;i++){name=split[i].replace("*",".*?");if(name[0]==="-"){debug.skips.push(new RegExp("^"+name.substr(1)+"$"))}else{debug.names.push(new RegExp("^"+name+"$"))}}};debug.disable=function(){debug.enable("")};debug.humanize=function(ms){var sec=1e3,min=60*1e3,hour=60*min;if(ms>=hour)return(ms/hour).toFixed(1)+"h";if(ms>=min)return(ms/min).toFixed(1)+"m";if(ms>=sec)return(ms/sec|0)+"s";return ms+"ms"};debug.enabled=function(name){for(var i=0,len=debug.skips.length;i<len;i++){if(debug.skips[i].test(name)){return false}}for(var i=0,len=debug.names.length;i<len;i++){if(debug.names[i].test(name)){return true}}return false};if(window.localStorage)debug.enable(localStorage.debug)},{}],40:[function(require,module,exports){var toFunction=require("to-function");module.exports=function(arr,fn){if("function"!=typeof fn){if(Object(fn)===fn)fn=objectToFunction(fn);else fn=toFunction(fn)}for(var i=0,len=arr.length;i<len;++i){if(fn(arr[i],i))return arr[i]}};function objectToFunction(obj){return function(o){for(var key in obj){if(o[key]!=obj[key])return false}return true}}},{"to-function":46}],46:[function(require,module,exports){var expr;try{expr=require("props")}catch(e){expr=require("component-props")}module.exports=toFunction;function toFunction(obj){switch({}.toString.call(obj)){case"[object Object]":return objectToFunction(obj);case"[object Function]":return obj;case"[object String]":return stringToFunction(obj);case"[object RegExp]":return regexpToFunction(obj);default:return defaultToFunction(obj)}}function defaultToFunction(val){return function(obj){return val===obj}}function regexpToFunction(re){return function(obj){return re.test(obj)}}function stringToFunction(str){if(/^ *\W+/.test(str))return new Function("_","return _ "+str);return new Function("_","return "+get(str))}function objectToFunction(obj){var match={};for(var key in obj){match[key]=typeof obj[key]==="string"?defaultToFunction(obj[key]):toFunction(obj[key])}return function(val){if(typeof val!=="object")return false;for(var key in match){if(!(key in val))return false;if(!match[key](val[key]))return false}return true}}function get(str){var props=expr(str);if(!props.length)return"_."+str;var val,i,prop;for(i=0;i<props.length;i++){prop=props[i];val="_."+prop;val="('function' == typeof "+val+" ? "+val+"() : "+val+")";str=stripNested(prop,str,val)}return str}function stripNested(prop,str,val){return str.replace(new RegExp("(\\.)?"+prop,"g"),function($0,$1){return $1?$0:val})}},{props:47,"component-props":47}],47:[function(require,module,exports){var globals=/\b(this|Array|Date|Object|Math|JSON)\b/g;module.exports=function(str,fn){var p=unique(props(str));if(fn&&"string"==typeof fn)fn=prefixed(fn);if(fn)return map(str,p,fn);return p};function props(str){return str.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\//g,"").replace(globals,"").match(/[$a-zA-Z_]\w*/g)||[]}function map(str,props,fn){var re=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\/|[a-zA-Z_]\w*/g;return str.replace(re,function(_){if("("==_[_.length-1])return fn(_);if(!~props.indexOf(_))return _;return fn(_)})}function unique(arr){var ret=[];for(var i=0;i<arr.length;i++){if(~ret.indexOf(arr[i]))continue;ret.push(arr[i])}return ret}function prefixed(str){return function(_){return str+_}}},{}],41:[function(require,module,exports){var type=require("type");module.exports=function loadScript(options,callback){if(!options)throw new Error("Cant load nothing...");if(type(options)==="string")options={src:options};var https=document.location.protocol==="https:"||document.location.protocol==="chrome-extension:";if(options.src&&options.src.indexOf("//")===0){options.src=https?"https:"+options.src:"http:"+options.src}if(https&&options.https)options.src=options.https;else if(!https&&options.http)options.src=options.http;var script=document.createElement("script");script.type="text/javascript";script.async=true;script.src=options.src;var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(script,firstScript);if(callback&&type(callback)==="function"){if(script.addEventListener){script.addEventListener("load",function(event){callback(null,event)},false);script.addEventListener("error",function(event){callback(new Error("Failed to load the script."),event)},false)}else if(script.attachEvent){script.attachEvent("onreadystatechange",function(event){if(/complete|loaded/.test(script.readyState)){callback(null,event)}})}}return script}},{type:27}],42:[function(require,module,exports){var nextTick=require("next-tick");var slice=Array.prototype.slice;var has=Object.hasOwnProperty;module.exports=memoize;function memoize(fn,keyFn){keyFn||(keyFn=function(key){return key});var cached={};var callbacks={};return function(){var args=initial(arguments);var cb=last(arguments);var key=keyFn.apply(keyFn,args);if(has.call(cached,key)){return nextTick(function(){cb.apply(cb,toRes(null,cached[key]))})}if(has.call(callbacks,key))return callbacks[key].push(cb);callbacks[key]=[];callbacks[key].push(cb);args.push(onFinish);fn.apply(fn,args);function onFinish(err){if(!err)cached[key]=rest(arguments);respond(callbacks[key],arguments);delete callbacks[key]}}}function respond(callbacks,args){if(!callbacks)return;for(var i=0;i<callbacks.length;i++){var callback=callbacks[i];callback.apply(callback,args)}}function initial(args){return slice.apply(args,[0,-1])}function rest(args){return slice.apply(args,[1])}function last(args){return args[args.length-1]}function toRes(err,args){return[err].concat(args)}},{"next-tick":26}],43:[function(require,module,exports){exports.parse=function(url){var a=document.createElement("a");a.href=url;return{href:a.href,host:a.host,port:a.port,hash:a.hash,hostname:a.hostname,pathname:a.pathname,protocol:a.protocol,search:a.search,query:a.search.slice(1)}};exports.isAbsolute=function(url){if(0==url.indexOf("//"))return true;if(~url.indexOf("://"))return true;return false};exports.isRelative=function(url){return!exports.isAbsolute(url)};exports.isCrossDomain=function(url){url=exports.parse(url);return url.hostname!=location.hostname||url.port!=location.port||url.protocol!=location.protocol}},{}],5:[function(require,module,exports){var Emitter,checkEvent,createModal,domify,gmodal,hideModalInternal,modal,modals,showModalInternal,trim,win;Emitter=require("emitter");domify=require("domify");trim=require("trim");win=window.self||window;gmodal=win.gmodal;modals=[];checkEvent=function(self,name,evt,el){var myEvt,scls,tg;evt=evt||win.event;tg=evt.target||evt.srcElement;if(tg.nodeType===3){tg=tg.parentNode}if(self.hasCls(tg.parentNode,""+self.closeCls)){tg=tg.parentNode}scls="gmodal-container gmodal-wrap";if(name==="click"){if(self.hasCls(tg,scls)||tg===el){self.emit("click",tg,evt)}}else if(name==="keypress"){if(self.hasCls(tg,scls)||tg===el||tg===self.doc||tg===self.doc.body){if((evt.which||evt.keyCode)===27){self.emit("esc",tg,evt)}}}else if(name==="tap"){if(self.hasCls(tg,scls)||tg===el){self.emit("tap",tg,evt)}}if(self.hasCls(tg,""+self.closeCls)){myEvt={cancel:false};self.emit("close",myEvt,tg,evt);if(!myEvt.cancel){hideModalInternal(self)}}return true};createModal=function(self){var el,myKeypress,oldkp;el=self.doc.getElementById("gmodal");if(!el){self.injectStyle("gmodalcss",self.css);el=self.doc.createElement("div");el.id="gmodal";el.onclick=function(evt){return checkEvent(self,"click",evt,el)};myKeypress=function(evt){return checkEvent(self,"keypress",evt,el)};el.onkeypress=myKeypress;if(typeof self.doc.onkeypress==="function"){oldkp=self.doc.onkeypress;self.doc.onkeypress=function(evt){oldkp(evt);return myKeypress(evt)}}else{self.doc.onkeypress=myKeypress}el.ontap=function(evt){return checkEvent(self,"tap",evt,el)};el.appendChild(domify(self.tpl));self.doc.getElementsByTagName("body")[0].appendChild(el)}return el};showModalInternal=function(self,opts){var body,eCls,i,len,ref,v;self.isVisible=true;if(opts!=null){self.opts=opts;if(self.opts.content!=null){while(self.el.firstChild){self.el.removeChild(self.el.firstChild)}if(typeof self.opts.content==="string"){self.el.appendChild(domify(self.opts.content))}else{self.el.appendChild(self.opts.content)}self.opts.content=null}}self.closeCls=self.opts.closeCls||self.closeCls;if(!self.opts.disableScrollTop){win.scrollTo(0,0)}self.elWrapper.style.display=self.elWrapper.style.visibility="";self.elWrapper.className=trim(self.baseCls+" "+(self.opts.cls||""));body=self.doc.getElementsByTagName("html")[0];eCls=body.className;body.className=trim(eCls+" html-gmodal");setTimeout(function(){self.emit("show-timeout",self);self.el.className=trim((" "+self.el.className+" ").replace(" in ","")+" in")},self.opts.timeout||50);if(self.opts.hideOn){self.opts._autoHideHandler=function(){return hideModalInternal(self)};ref=self.opts.hideOn.split(",");for(i=0,len=ref.length;i<len;i++){v=ref[i];if(v==="esc"||v==="click"||v==="tap"){self.on(v,self.opts._autoHideHandler)}}}self.emit("show",self);return self};hideModalInternal=function(self){self.elWrapper.className=""+self.baseCls;self.el.className="gmodal-wrap gmodal-content";setTimeout(function(){var eCls;eCls=self.doc.getElementsByTagName("html")[0].className;self.doc.getElementsByTagName("html")[0].className=trim(eCls.replace(/html\-gmodal/gi,""));self.isVisible=false;self.emit("hide",self);if(typeof self.opts.hideCallback==="function"){self.opts.hideCallback(self)}if(self.opts._autoHideHandler){self.off("esc",self.opts._autoHideHandler);self.off("click",self.opts._autoHideHandler);self.off("tap",self.opts._autoHideHandler)}if(modals.length!==0){return self.show()}},self.opts.timeout||50);return self};modal=function(){function modal(){}modal.prototype.doc=win.document;modal.prototype.ishim=null;modal.prototype.elWrapper=null;modal.prototype.el=null;modal.prototype.opts={};modal.prototype.baseCls="gmodal";modal.prototype.closeCls="gmodal-close";modal.prototype.tpl='<div class="gmodal-container"><div class="gmodal-wrap gmodal-left"></div><div class="gmodal-wrap gmodal-content" id="gmodalContent"></div><div class="gmodal-wrap gmodal-right"></div></div>';modal.prototype.css=".gmodal{display:none;overflow:hidden;outline:0;-webkit-overflow-scrolling:touch;position:fixed;top:0;left:0;width:100%;height:200%;z-index:9999990}.gmodal .frameshim{position:absolute;display:block;visibility:hidden;width:100%;height:100%;margin:0;top:0;left:0;border:none;z-index:-999}.html-gmodal body .gmodal{display:block}.html-gmodal,.html-modal body{overflow:hidden;margin:0;padding:0;height:100%;width:100%}.gmodal-container{display:table;position:relative;width:100%;height:50%}.gmodal-wrap{display:table-cell;position:relative;vertical-align:middle}.gmodal-left,.gmodal-right{width:50%}";modal.prototype.show=function(opts,hideCb){var ref,self;self=this;if(!((ref=self.doc)!=null?ref.body:void 0)){return false}self.elWrapper=createModal(self);if(!self.el){self.el=self.doc.getElementById("gmodalContent")}if(opts){opts.hideCallback=hideCb;modals.push(opts)}if(!!self.isVisible){return false}if(modals.length>0){opts=modals.shift()}if(!opts){return false}showModalInternal(self,opts);return self};modal.prototype.hide=function(){var self;self=this;if(!self.elWrapper){return self}if(!!self.opts){hideModalInternal(self)}return self};modal.prototype.injectStyle=function(id,css){var el,elx,self;self=this;el=self.doc.getElementById(id);if(!el){el=self.doc.createElement("style");el.id=id;el.type="text/css";if(el.styleSheet){el.styleSheet.cssText=css}else{el.appendChild(self.doc.createTextNode(css))}elx=self.doc.getElementsByTagName("link")[0];elx=elx||(self.doc.head||self.doc.getElementsByTagName("head")[0]).lastChild;elx.parentNode.insertBefore(el,elx)}return self};modal.prototype.hasCls=function(el,cls){var i,k,len,ref,v;ref=cls.split(" ");for(k=i=0,len=ref.length;i<len;k=++i){v=ref[k];if((" "+el.className+" ").indexOf(" "+v+" ")>=0){return true}}return false};modal.prototype.iShimmy=function(){var self;self=this;if(self.elWrapper!=null&&!self.shim){self.ishim=self.doc.createElement("iframe");self.ishim.className="iframeshim";self.ishim.scrolling="no";self.ishim.frameborder=0;self.ishim.height="100";self.ishim.width="100";self.elWrapper.appendChild(self.ishim)}return self};return modal}();if(!gmodal){Emitter(modal.prototype);gmodal=new modal;win.gmodal=gmodal}module.exports=gmodal},{emitter:48,domify:49,trim:29}],48:[function(require,module,exports){if(typeof module!=="undefined"){module.exports=Emitter}function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],49:[function(require,module,exports){module.exports=parse;var innerHTMLBug=false;var bugTestDiv;if(typeof document!=="undefined"){bugTestDiv=document.createElement("div");bugTestDiv.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';innerHTMLBug=!bugTestDiv.getElementsByTagName("link").length;bugTestDiv=undefined}var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"];map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"];map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");if(!doc)doc=document;var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if(tag=="body"){var el=doc.createElement("html");el.innerHTML=html;return el.removeChild(el.lastChild)}var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=doc.createElement("div");el.innerHTML=prefix+html+suffix;while(depth--)el=el.lastChild;if(el.firstChild==el.lastChild){return el.removeChild(el.firstChild)}var fragment=doc.createDocumentFragment();while(el.firstChild){fragment.appendChild(el.removeChild(el.firstChild))}return fragment}},{}],6:[function(require,module,exports){var domify=require("domify");var each=require("each");var events=require("event");var getKeys=require("keys");var query=require("query");var trim=require("trim");var slice=[].slice;var isArray=Array.isArray||function(val){return!!val&&"[object Array]"===Object.prototype.toString.call(val)};var attrs=["id","src","rel","cols","rows","type","name","href","title","style","width","height","action","method","tabindex","placeholder"];var quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;module.exports=dom;function dom(selector,context){if(isArray(selector)){return new List(selector)}if(selector instanceof List){return selector}if(selector.nodeName){return new List([selector])}if("string"!=typeof selector){throw new TypeError("invalid selector")}var htmlselector=trim.left(selector);if(isHTML(htmlselector)){return new List([domify(htmlselector)],htmlselector)}var ctx=context?context instanceof List?context[0]:context:document;return new List(query.all(selector,ctx),selector)}dom.List=List;dom.attrs=attrs;dom.use=function(name,fn){var keys=[];var tmp;if(2==arguments.length){keys.push(name);tmp={};tmp[name]=fn;fn=tmp}else if(name.name){fn=name;name=name.name;keys.push(name);tmp={};tmp[name]=fn;fn=tmp}else{keys=getKeys(name);fn=name}for(var i=0,len=keys.length;i<len;i++){List.prototype[keys[i]]=fn[keys[i]]}return this};function List(els,selector){els=els||[];var len=this.length=els.length;for(var i=0;i<len;i++)this[i]=els[i];this.selector=selector}List.prototype.dom=dom;List.prototype.length=0;List.prototype.splice=Array.prototype.splice;List.prototype.toArray=function(){return slice.call(this)};each(attrs,function(name){List.prototype[name]=function(val){if(0==arguments.length)return this.attr(name);return this.attr(name,val)}});dom.use(require("./lib/attributes"));dom.use(require("./lib/classes"));dom.use(require("./lib/events"));dom.use(require("./lib/manipulate"));dom.use(require("./lib/traverse"));function isHTML(str){if(str.charAt(0)==="<"&&str.charAt(str.length-1)===">"&&str.length>=3)return true;var match=quickExpr.exec(str);return!!(match&&match[1])}},{domify:50,each:51,event:36,keys:52,query:38,trim:29,"./lib/attributes":53,"./lib/classes":54,"./lib/events":55,"./lib/manipulate":56,"./lib/traverse":57}],50:[function(require,module,exports){module.exports=parse;var div=document.createElement("div");div.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';var innerHTMLBug=!div.getElementsByTagName("link").length;div=undefined;var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"];map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"];map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");if(!doc)doc=document;var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if(tag=="body"){var el=doc.createElement("html");el.innerHTML=html;return el.removeChild(el.lastChild)}var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=doc.createElement("div");el.innerHTML=prefix+html+suffix;while(depth--)el=el.lastChild;if(el.firstChild==el.lastChild){return el.removeChild(el.firstChild)}var fragment=doc.createDocumentFragment();while(el.firstChild){fragment.appendChild(el.removeChild(el.firstChild))}return fragment}},{}],51:[function(require,module,exports){try{var type=require("type")}catch(err){var type=require("component-type")}var toFunction=require("to-function");var has=Object.prototype.hasOwnProperty;module.exports=function(obj,fn,ctx){fn=toFunction(fn);ctx=ctx||this;switch(type(obj)){case"array":return array(obj,fn,ctx);case"object":if("number"==typeof obj.length)return array(obj,fn,ctx);return object(obj,fn,ctx);case"string":return string(obj,fn,ctx)}};function string(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj.charAt(i),i)}}function object(obj,fn,ctx){for(var key in obj){if(has.call(obj,key)){fn.call(ctx,key,obj[key])}}}function array(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj[i],i)}}},{type:58,"component-type":58,"to-function":46}],58:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if(val===null)return"null";if(val===undefined)return"undefined";if(val&&val.nodeType===1)return"element";if(val===Object(val))return"object";return typeof val}},{}],52:[function(require,module,exports){var has=Object.prototype.hasOwnProperty;module.exports=Object.keys||function(obj){var keys=[];for(var key in obj){if(has.call(obj,key)){keys.push(key)}}return keys}},{}],53:[function(require,module,exports){var value=require("value");exports.attr=function(name,val){if(1==arguments.length){return this[0]&&this[0].getAttribute(name)}if(null==val){return this.removeAttr(name)}return this.forEach(function(el){el.setAttribute(name,val)})};exports.removeAttr=function(name){return this.forEach(function(el){el.removeAttribute(name)})};exports.prop=function(name,val){if(1==arguments.length){return this[0]&&this[0][name]}return this.forEach(function(el){el[name]=val})};exports.val=exports.value=function(val){if(0==arguments.length){return this[0]?value(this[0]):undefined}return this.forEach(function(el){value(el,val)})}},{value:59}],59:[function(require,module,exports){var typeOf=require("type");module.exports=function(el,val){if(2==arguments.length)return set(el,val);return get(el)};function get(el){switch(type(el)){case"checkbox":case"radio":if(el.checked){var attr=el.getAttribute("value");return null==attr?true:attr}else{return false}case"radiogroup":for(var i=0,radio;radio=el[i];i++){if(radio.checked)return radio.value}break;case"select":for(var i=0,option;option=el.options[i];i++){if(option.selected)return option.value}break;default:return el.value}}function set(el,val){switch(type(el)){case"checkbox":case"radio":if(val){el.checked=true}else{el.checked=false}break;case"radiogroup":for(var i=0,radio;radio=el[i];i++){radio.checked=radio.value===val}break;case"select":for(var i=0,option;option=el.options[i];i++){option.selected=option.value===val}break;default:el.value=val}}function type(el){var group="array"==typeOf(el)||"object"==typeOf(el);if(group)el=el[0];var name=el.nodeName.toLowerCase();var type=el.getAttribute("type");if(group&&type&&"radio"==type.toLowerCase())return"radiogroup";if("input"==name&&type&&"checkbox"==type.toLowerCase())return"checkbox";if("input"==name&&type&&"radio"==type.toLowerCase())return"radio";if("select"==name)return"select";return name}},{type:27}],54:[function(require,module,exports){var classes=require("classes");exports.addClass=function(name){return this.forEach(function(el){el._classes=el._classes||classes(el);el._classes.add(name)})};exports.removeClass=function(name){return this.forEach(function(el){el._classes=el._classes||classes(el);el._classes.remove(name)})};exports.toggleClass=function(name,bool){var fn="toggle";if(2==arguments.length){fn=bool?"add":"remove"}return this.forEach(function(el){el._classes=el._classes||classes(el);el._classes[fn](name)})};exports.hasClass=function(name){var el;for(var i=0,len=this.length;i<len;i++){el=this[i];el._classes=el._classes||classes(el);if(el._classes.has(name))return true}return false}},{classes:60}],60:[function(require,module,exports){var index=require("indexof");var re=/\s+/;var toString=Object.prototype.toString;module.exports=function(el){return new ClassList(el)};function ClassList(el){if(!el||!el.nodeType){throw new Error("A DOM element reference is required")}this.el=el;this.list=el.classList}ClassList.prototype.add=function(name){if(this.list){this.list.add(name);return this}var arr=this.array();var i=index(arr,name);if(!~i)arr.push(name);this.el.className=arr.join(" ");return this};ClassList.prototype.remove=function(name){if("[object RegExp]"==toString.call(name)){return this.removeMatching(name)}if(this.list){this.list.remove(name);return this}var arr=this.array();var i=index(arr,name);if(~i)arr.splice(i,1);this.el.className=arr.join(" ");return this};ClassList.prototype.removeMatching=function(re){var arr=this.array();for(var i=0;i<arr.length;i++){if(re.test(arr[i])){this.remove(arr[i])}}return this};ClassList.prototype.toggle=function(name,force){if(this.list){if("undefined"!==typeof force){if(force!==this.list.toggle(name,force)){this.list.toggle(name)}}else{this.list.toggle(name)}return this}if("undefined"!==typeof force){if(!force){this.remove(name)}else{this.add(name);

}}else{if(this.has(name)){this.remove(name)}else{this.add(name)}}return this};ClassList.prototype.array=function(){var str=this.el.className.replace(/^\s+|\s+$/g,"");var arr=str.split(re);if(""===arr[0])arr.shift();return arr};ClassList.prototype.has=ClassList.prototype.contains=function(name){return this.list?this.list.contains(name):!!~index(this.array(),name)}},{indexof:28}],55:[function(require,module,exports){var events=require("event");var delegate=require("delegate");exports.on=function(event,selector,fn,capture){if("string"==typeof selector){return this.forEach(function(el){fn._delegate=delegate.bind(el,selector,event,fn,capture)})}capture=fn;fn=selector;return this.forEach(function(el){events.bind(el,event,fn,capture)})};exports.off=function(event,selector,fn,capture){if("string"==typeof selector){return this.forEach(function(el){delegate.unbind(el,event,fn._delegate,capture)})}capture=fn;fn=selector;return this.forEach(function(el){events.unbind(el,event,fn,capture)})}},{event:36,delegate:19}],56:[function(require,module,exports){var value=require("value");var css=require("css");var text=require("text");exports.text=function(str){if(1==arguments.length){return this.forEach(function(el){if(11==el.nodeType){var node;while(node=el.firstChild)el.removeChild(node);el.appendChild(document.createTextNode(str))}else{text(el,str)}})}var out="";this.forEach(function(el){if(11==el.nodeType){out+=getText(el.firstChild)}else{out+=text(el)}});return out};function getText(el){var ret="";var type=el.nodeType;var node;switch(type){case 1:case 9:ret=text(el);break;case 11:ret=el.textContent||el.innerText;break;case 3:case 4:return el.nodeValue;default:while(node=el[i++]){ret+=getText(node)}}return ret}exports.html=function(html){if(1==arguments.length){return this.forEach(function(el){el.innerHTML=html})}return this[0]&&this[0].innerHTML};exports.css=function(prop,val){if(!val&&"object"!=typeof prop){return css(this[0],prop)}this.forEach(function(el){css(el,prop,val)});return this};exports.prepend=function(val){var dom=this.dom;this.forEach(function(target,i){dom(val).forEach(function(selector){selector=i?selector.cloneNode(true):selector;if(target.children.length){target.insertBefore(selector,target.firstChild)}else{target.appendChild(selector)}})});return this};exports.append=function(val){var dom=this.dom;this.forEach(function(target,i){dom(val).forEach(function(el){el=i?el.cloneNode(true):el;target.appendChild(el)})});return this};exports.insertAfter=function(val){var dom=this.dom;this.forEach(function(el){dom(val).forEach(function(target,i){if(!target.parentNode)return;el=i?el.cloneNode(true):el;target.parentNode.insertBefore(el,target.nextSibling)})});return this};exports.appendTo=function(val){this.dom(val).append(this);return this};exports.replace=function(val){var self=this;var list=this.dom(val);list.forEach(function(el,i){var old=self[i];var parent=old.parentNode;if(!parent)return;el=i?el.cloneNode(true):el;parent.replaceChild(el,old)});return this};exports.empty=function(){return this.forEach(function(el){text(el,"")})};exports.remove=function(){return this.forEach(function(el){var parent=el.parentNode;if(parent)parent.removeChild(el)})};exports.clone=function(){var out=this.map(function(el){return el.cloneNode(true)});return this.dom(out)};exports.focus=function(){this[0].focus();return this}},{value:59,css:61,text:62}],61:[function(require,module,exports){var debug=require("debug")("css");var set=require("./lib/style");var get=require("./lib/css");module.exports=css;function css(el,prop,val){if(!el)return;if(undefined!==val){var obj={};obj[prop]=val;debug("setting styles %j",obj);return setStyles(el,obj)}if("object"==typeof prop){debug("setting styles %j",prop);return setStyles(el,prop)}debug("getting %s",prop);return get(el,prop)}function setStyles(el,props){for(var prop in props){set(el,prop,props[prop])}return el}},{debug:2,"./lib/style":63,"./lib/css":64}],63:[function(require,module,exports){var debug=require("debug")("css:style");var camelcase=require("to-camel-case");var support=require("./support");var property=require("./prop");var hooks=require("./hooks");module.exports=style;var cssNumber={columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true};function style(el,prop,val,extra){if(!el||el.nodeType===3||el.nodeType===8||!el.style)return;var orig=camelcase(prop);var style=el.style;var type=typeof val;if(!val)return get(el,prop,orig,extra);prop=property(prop,style);var hook=hooks[prop]||hooks[orig];if("number"==type&&!cssNumber[orig]){debug('adding "px" to end of number');val+="px"}if(!support.clearCloneStyle&&""===val&&0===prop.indexOf("background")){debug('set property (%s) value to "inherit"',prop);style[prop]="inherit"}if(!hook||!hook.set||undefined!==(val=hook.set(el,val,extra))){debug("set hook defined. setting property (%s) to %s",prop,val);style[prop]="";style[prop]=val}}function get(el,prop,orig,extra){var style=el.style;var hook=hooks[prop]||hooks[orig];var ret;if(hook&&hook.get&&undefined!==(ret=hook.get(el,false,extra))){debug("get hook defined, returning: %s",ret);return ret}ret=style[prop];debug("getting %s",ret);return ret}},{debug:2,"to-camel-case":65,"./support":66,"./prop":67,"./hooks":68}],65:[function(require,module,exports){var toSpace=require("to-space-case");module.exports=toCamelCase;function toCamelCase(string){return toSpace(string).replace(/\s(\w)/g,function(matches,letter){return letter.toUpperCase()})}},{"to-space-case":69}],69:[function(require,module,exports){var clean=require("to-no-case");module.exports=toSpaceCase;function toSpaceCase(string){return clean(string).replace(/[\W_]+(.|$)/g,function(matches,match){return match?" "+match:""})}},{"to-no-case":70}],70:[function(require,module,exports){module.exports=toNoCase;var hasSpace=/\s/;var hasCamel=/[a-z][A-Z]/;var hasSeparator=/[\W_]/;function toNoCase(string){if(hasSpace.test(string))return string.toLowerCase();if(hasSeparator.test(string))string=unseparate(string);if(hasCamel.test(string))string=uncamelize(string);return string.toLowerCase()}var separatorSplitter=/[\W_]+(.|$)/g;function unseparate(string){return string.replace(separatorSplitter,function(m,next){return next?" "+next:""})}var camelSplitter=/(.)([A-Z]+)/g;function uncamelize(string){return string.replace(camelSplitter,function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")})}},{}],66:[function(require,module,exports){var reliableMarginRight;var boxSizingReliableVal;var pixelPositionVal;var clearCloneStyle;var docElem=document.documentElement;var container=document.createElement("div");var div=document.createElement("div");div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";exports.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";container.appendChild(div);exports.pixelPosition=function(){if(undefined==pixelPositionVal)computePixelPositionAndBoxSizingReliable();return pixelPositionVal};exports.boxSizingReliable=function(){if(undefined==boxSizingReliableVal)computePixelPositionAndBoxSizingReliable();return boxSizingReliableVal};exports.reliableMarginRight=function(){var ret;var marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";docElem.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight);docElem.removeChild(container);div.innerHTML="";return ret};function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;"+"position:absolute;top:1%";docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal=divStyle.top!=="1%";boxSizingReliableVal=divStyle.width==="4px";docElem.removeChild(container)}},{}],67:[function(require,module,exports){var debug=require("debug")("css:prop");var camelcase=require("to-camel-case");var vendor=require("./vendor");module.exports=prop;var cssProps={"float":"cssFloat"in document.documentElement.style?"cssFloat":"styleFloat"};function prop(prop,style){prop=cssProps[prop]||(cssProps[prop]=vendor(prop,style));debug("transform property: %s => %s",prop,style);return prop}},{debug:2,"to-camel-case":65,"./vendor":71}],71:[function(require,module,exports){var prefixes=["Webkit","O","Moz","ms"];module.exports=vendor;function vendor(prop,style){if(style[prop])return prop;var capName=prop[0].toUpperCase()+prop.slice(1);var original=prop;var i=prefixes.length;while(i--){prop=prefixes[i]+capName;if(prop in style)return prop}return original}},{}],68:[function(require,module,exports){var each=require("each");var css=require("./css");var cssShow={position:"absolute",visibility:"hidden",display:"block"};var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var rnumsplit=new RegExp("^("+pnum+")(.*)$","i");var rdisplayswap=/^(none|table(?!-c[ea]).+)/;var styles=require("./styles");var support=require("./support");var swap=require("./swap");var computed=require("./computed");var cssExpand=["Top","Right","Bottom","Left"];each(["width","height"],function(name){exports[name]={};exports[name].get=function(el,compute,extra){if(!compute)return;return 0==el.offsetWidth&&rdisplayswap.test(css(el,"display"))?swap(el,cssShow,function(){return getWidthOrHeight(el,name,extra)}):getWidthOrHeight(el,name,extra)};exports[name].set=function(el,val,extra){var styles=extra&&styles(el);return setPositiveNumber(el,val,extra?augmentWidthOrHeight(el,name,extra,"border-box"==css(el,"boxSizing",false,styles),styles):0)}});exports.opacity={};exports.opacity.get=function(el,compute){if(!compute)return;var ret=computed(el,"opacity");return""==ret?"1":ret};function setPositiveNumber(el,val,subtract){var matches=rnumsplit.exec(val);return matches?Math.max(0,matches[1])+(matches[2]||"px"):val}function getWidthOrHeight(el,prop,extra){var valueIsBorderBox=true;var val=prop==="width"?el.offsetWidth:el.offsetHeight;var styles=computed(el);var isBorderBox=support.boxSizing&&css(el,"boxSizing")==="border-box";if(val<=0||val==null){val=computed(el,prop,styles);if(val<0||val==null){val=el.style[prop]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===el.style[prop]);val=parseFloat(val)||0}extra=extra||(isBorderBox?"border":"content");val+=augmentWidthOrHeight(el,prop,extra,valueIsBorderBox,styles);return val+"px"}function augmentWidthOrHeight(el,prop,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:"width"==prop?1:0;var val=0;for(;i<4;i+=2){if(extra==="margin"){val+=css(el,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=css(el,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=css(el,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=css(el,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=css(el,"border"+cssExpand[i]+"Width",true,styles)}}}return val}},{each:51,"./css":64,"./styles":72,"./support":66,"./swap":73,"./computed":74}],64:[function(require,module,exports){var debug=require("debug")("css:css");var camelcase=require("to-camel-case");var computed=require("./computed");var property=require("./prop");module.exports=css;var cssNormalTransform={letterSpacing:0,fontWeight:400};function css(el,prop,extra,styles){var hooks=require("./hooks");var orig=camelcase(prop);var style=el.style;var val;prop=property(prop,style);var hook=hooks[prop]||hooks[orig];if(hook&&hook.get){debug("get hook provided. use that");val=hook.get(el,true,extra)}if(undefined==val){debug("fetch the computed value of %s",prop);val=computed(el,prop)}if("normal"==val&&cssNormalTransform[prop]){val=cssNormalTransform[prop];debug("normal => %s",val)}if(""==extra||extra){debug("converting value: %s into a number",val);var num=parseFloat(val);return true===extra||isNumeric(num)?num||0:val}return val}function isNumeric(obj){return!isNan(parseFloat(obj))&&isFinite(obj)}},{debug:2,"to-camel-case":65,"./computed":74,"./prop":67,"./hooks":68}],74:[function(require,module,exports){var debug=require("debug")("css:computed");var withinDocument=require("within-document");var styles=require("./styles");module.exports=computed;function computed(el,prop,precomputed){var computed=precomputed||styles(el);var ret;if(!computed)return;if(computed.getPropertyValue){ret=computed.getPropertyValue(prop)||computed[prop]}else{ret=computed[prop]}if(""===ret&&!withinDocument(el)){debug("element not within document, try finding from style attribute");var style=require("./style");ret=style(el,prop)}debug("computed value of %s: %s",prop,ret);return undefined===ret?ret:ret+""}},{debug:2,"within-document":75,"./styles":72,"./style":63}],75:[function(require,module,exports){module.exports=function(el){var node=el;while(node=node.parentNode){if(node==document)return true}return false}},{}],72:[function(require,module,exports){module.exports=styles;function styles(el){if(window.getComputedStyle){return el.ownerDocument.defaultView.getComputedStyle(el,null)}else{return el.currentStyle}}},{}],73:[function(require,module,exports){module.exports=swap;function swap(el,options,fn,args){for(var key in options){old[key]=el.style[key];el.style[key]=options[key]}ret=fn.apply(el,args||[]);for(key in options){el.style[key]=old[key]}return ret}},{}],62:[function(require,module,exports){var text="innerText"in document.createElement("div")?"innerText":"textContent";module.exports=function(el,val){if(val==null)return el[text];el[text]=val}},{}],57:[function(require,module,exports){var proto=Array.prototype;var each=require("each");var traverse=require("traverse");var toFunction=require("to-function");var matches=require("matches-selector");exports.find=function(selector){return this.dom(selector,this)};exports.is=function(selector){for(var i=0,el;el=this[i];i++){if(matches(el,selector))return true}return false};exports.parent=function(selector,limit){return this.dom(traverse("parentNode",this[0],selector,limit||1))};exports.next=function(selector,limit){return this.dom(traverse("nextSibling",this[0],selector,limit||1))};exports.prev=exports.previous=function(selector,limit){return this.dom(traverse("previousSibling",this[0],selector,limit||1))};exports.each=function(fn){var dom=this.dom;for(var i=0,list,len=this.length;i<len;i++){list=dom(this[i]);fn.call(list,list,i)}return this};exports.forEach=function(fn){for(var i=0,len=this.length;i<len;i++){fn.call(this[i],this[i],i)}return this};exports.map=function(fn){fn=toFunction(fn);var dom=this.dom;var out=[];for(var i=0,len=this.length;i<len;i++){out.push(fn.call(dom(this[i]),this[i],i))}return this.dom(out)};exports.filter=exports.select=function(fn){fn=toFunction(fn);var dom=this.dom;var out=[];var val;for(var i=0,len=this.length;i<len;i++){val=fn.call(dom(this[i]),this[i],i);if(val)out.push(this[i])}return this.dom(out)};exports.reject=function(fn){var dom=this.dom;var out=[];var len=this.length;var val,i;if("string"==typeof fn)fn=toFunction(fn);if(fn){for(i=0;i<len;i++){val=fn.call(dom(this[i]),this[i],i);if(!val)out.push(this[i])}}else{for(i=0;i<len;i++){if(this[i]!=fn)out.push(this[i])}}return this.dom(out)};exports.at=function(i){return this.dom(this[i])};exports.first=function(){return this.dom(this[0])};exports.last=function(){return this.dom(this[this.length-1])};each(["push","pop","shift","splice","unshift","reverse","sort","toString","concat","join","slice"],function(method){exports[method]=function(){return proto[method].apply(this.toArray(),arguments)}})},{each:51,traverse:76,"to-function":46,"matches-selector":77}],76:[function(require,module,exports){var matches=require("matches-selector");module.exports=function(type,el,selector,len){var el=el[type],n=len||1,ret=[];if(!el)return ret;do{if(n==ret.length)break;if(1!=el.nodeType)continue;if(matches(el,selector))ret.push(el);if(!selector)ret.push(el)}while(el=el[type]);return ret}},{"matches-selector":37}],77:[function(require,module,exports){var query=require("query");var proto=Element.prototype;var vendor=proto.matches||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match;function match(el,selector){if(vendor)return vendor.call(el,selector);var nodes=query.all(selector,el.parentNode);for(var i=0;i<nodes.length;++i){if(nodes[i]==el)return true}return false}},{query:38}]},{},{1:""});